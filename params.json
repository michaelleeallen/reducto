{
  "name": "Reducto",
  "tagline": "A small module that aims to reduce the amount of code needed to create APIs with a distributed back end in express.js",
  "body": "# Reducto\r\n[![Build Status](https://travis-ci.org/michaelleeallen/reducto.png)](https://travis-ci.org/michaelleeallen/reducto)\r\n\r\n[![devDependency Status](https://david-dm.org/michaelleeallen/reducto.svg)](https://david-dm.org/michaelleeallen/reducto)\r\n\r\nA lightweight configuration framework for express.js that aims to simplify creating routes and APIs for apps with\r\na distributed back-end.\r\n\r\nThe main goal of reducto is to break apart the routing mechanism into smaller, more cohesive components. By reducing your app to middleware, data transforms, and reusable service calls you end up with a smaller set of code to reason about and thus make your app easier to write and maintain.\r\n\r\n\r\n## Installation\r\n\r\n\tnpm install reducto\r\n\r\n## Project Setup\r\n\r\nReducto only provides configuration for express, so you will need to include express\r\nyourself:\r\n\r\n\tnpm install express --save\r\n\r\nYou must include a routes config that defines how to construct your app(see below). A services config is optional, but useful for connecting to distributed APIs.\r\n\r\n```javascript\r\nvar express = require('express');\r\nvar reducto = require('reducto');\r\nvar app = express();\r\nvar routes = require('your_route_config.json');\r\nvar services = require('your_services_config.json');\r\n\r\nreducto(app, routes, services);\r\n\r\napp.listen(3000);\r\n```\r\n\r\n## Routes\r\n\r\nRoutes can be configured to use middleware, views, fixtures and service calls. Each piece is optional, and should be added in the order you want them to run:\r\n\r\n```json\r\n{\r\n  \"/my/route/:id\": {\r\n    \"GET\": [\r\n      { \"type\": \"middleware\", \"path\": \"./lib/middleware.js#myFuncName\" },\r\n      { \"type\": \"service\", \"name\": \"GET:myEndpoint\" },\r\n      { \"type\": \"fixture\", \"data\": {\r\n        \"title\": \"My awesome page title\"\r\n      }},\r\n      { \"type\": \"view\", \"name\": \"my-view\" }\r\n    ],\r\n    \"POST\": [\r\n      { \"type\": \"service\", \"name\": \"POST:myEndpoint\" },\r\n      { \"type\": \"transform\", \"path\": \"./lib/my-post-transform.js\" }\r\n    ]\r\n  }\r\n}\r\n```\r\n\r\nEach route is defined by its URI pattern. This can be any legal express route pattern. Next you define\r\nthe HTTP methods per route. Each method has its own list of configurations.\r\n\r\n### middleware\r\n\r\n#### path\r\nThe file path to the middleware file(with optional function name as *file.js#myFuncName*), or the name of any 3rd-party express middleware\r\n\r\n### service\r\n\r\n#### name\r\nThe name of service endpoint from your services config file.\r\n\r\n### transform\r\n\r\n#### path\r\nThe file path to the transform function(with optional function name as *file.js#myFuncName*).\r\n\r\n### fixture\r\n\r\n#### data\r\nA JSON object containing static data. This data is added to the cumulative `res.locals` object.\r\n\r\n### view\r\n\r\n#### name\r\nThe name of a view to render with `res.render`. You must provide express with a rendering engine for this to work. See examples.\r\n\r\n\r\n## Services\r\n\r\nServices, or rather, service calls, represent any callable HTTP endpoint. Right now only RESTful enpoints are supported.\r\n```json\r\n{\r\n  \"myEndpoint\": {\r\n    \"GET\": {\r\n      \"uri\": \"http://myws.com/api/someresource/{id}\",\r\n      \"headers\": {\r\n        \"api-key\": \"adlfplkjf09123lkj32lkj3\"\r\n      }\r\n    },\r\n    \"POST\": {\r\n      \"uri\": \"http://myws.com/api/someresource\"\r\n    }\r\n  }\r\n}\r\n```\r\nNote that the route config is using\r\nthe express routing mechanism for parameters: `/my/route/:id`. This data can then be used in our service calls by\r\nplacing a corresponding URI token in the service definition: `http://myws.com/api/someresource/{id}` where `{id}`\r\nwill map to `:id`.\r\n\r\nService calls use [mikeal's](https://github.com/mikeal) [request](https://github.com/mikeal/request) module to handle HTTP, so any valid configuration for\r\n**request** applies here.\r\n\r\n## Data Transforms\r\nTransforms are any module/method that accepts JSON as input and produces JSON as output. Transforms will be passed in the cumulative `res.locals` object.\r\n\r\n```javascript\r\nmodule.exports = function(data){\r\n  // do some modification on data ...\r\n  return data;\r\n};\r\n```\r\nThese are great for when you need the data in a different format than what the service(which you may have no control over) provides.\r\n\r\n## Examples\r\n\r\nNavigate to the root directory and run `npm start`. This will start the example app at\r\n`http://localhost:3000`. You can view the example page by pointing your browser to `http://localhost:3000/weather/:zipcode`\r\nwhere `:zipcode` is any valid zip. The resulting page should show you the weather for that zipcode.\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}